<!DOCTYPE html>
<html data-scroll='0' lang="en" dir=ZgotmplZ >

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="config.yaml fields # Note that this is a living document and the following is subject to change.
The Data Pipeline API hinges on a config.yaml file, which lets users specify metadata to be used during file lookup for read or write, and configure overall API behaviour. This user written config.yaml is translated into a working config file by FAIR run, which is then taken as input by the Data Pipeline API.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="config.yaml fields" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.fairdatapipeline.org/docs/cli/config/" />

<title>config.yaml fields | FAIRDataPipeline</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.6cadb488be70926c21eb85dbe7b904cae7b12a25881b3e44aa9f69d9fe7e5435.css" integrity="sha256-bK20iL5wkmwh64Xb57kEyuexKiWIGz5Eqp9p2f5&#43;VDU=">
<script defer src="/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js" integrity="sha256-b2&#43;Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC&#43;NdcPIvZhzk="></script>
<link rel="alternate" type="application/rss+xml" href="https://www.fairdatapipeline.org/docs/cli/config/index.xml" title="FAIRDataPipeline" />
<!--
Made with Book Theme
https://github.com/RyanJField/hugo-book
-->
  
  
<script defer type="text/javascript" src="/lunr.min.js"></script>

<script defer src="/en.fancy-search.min.4a58a920302aa7c71df1f5e3e5cb785995e44802acb1685a2c143af85e81b793.js" integrity="sha256-SlipIDAqp8cd8fXj5ct4WZXkSAKssWhaLBQ6&#43;F6Bt5M="></script>
<script defer src="/scroll.js"></script>
</head>

<body dir=ZgotmplZ>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />

  
  <div class="custom-header">  
    <div class="custom-flex container flex">
      <div class="custom-left">
        <div class="custom-brand">
          <h2 class="custom-brand-text">
            <a href="/"><img src="/logo.jpg" alt="Logo" /><span>FAIRDataPipeline</span>
            </a>
          </h2>
          </div> 
        </div>  
      <div class ="custom-search-container">
        
<div class="search-top">
    <div class="search">
        <div class="search-input-wrap">
            <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search FAIRDataPipeline" aria-label="Search FAIRDataPipeline" autocomplete="off">
            <label for="search-input" class="search-label">
              <div class="search-svg">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
                <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
              </svg>
            </div>
            </label>
        </div>
        <div id="search-results" class="search-results"></div>
    </div>
</div>

      </div>
    </div>    
  </div>
  

  <main class="container flex">
    <aside class="book-menu">
      
  <nav>













  



  
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/quick_start/" class="">Quick Start</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cli/" class="collapsed ">Fair CLI</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/docs/cli/cli_readme/" class="">FAIR CLI readme</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cli/cli_functions/" class="">FAIR CLI functions</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cli/example0/" class="">DPAPI examples</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cli/config/" class="active">config.yaml fields</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/cli/example1/" class="">DPAPI functions</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/data_registry/" class="collapsed ">FAIR Data Registry</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/sync_notes/" class="">Notes on synchronisation</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/API/" class="collapsed ">Modelling APIs</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/jargon_buster/" class="">Jargon buster</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/repository_status/" class="">Repository Status</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/use_cases/" class="collapsed ">Uses cases</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/SCRC/" class="">SCRC</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/docs/edit-site/" class="">Edit this site</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
  </ul>
  











  
<ul>
  
  <li>
    <a href="https://www.gla.ac.uk/research/az/scrc/" target="_blank" rel="noopener">
        SCRC UoG
      </a>
  </li>
  
  <li>
    <a href="https://data.fairdatapipeline.org/" target="_blank" rel="noopener">
        Remote Data Registry
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>config.yaml fields</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>

  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#configyaml-fields"><em>config.yaml</em> fields</a>
      <ul>
        <li><a href="#simple-inputs-and-outputs">Simple inputs and outputs</a></li>
        <li><a href="#extended-inputs-and-outputs">Extended inputs and outputs</a></li>
        <li><a href="#flexible-inputs-and-outputs">Flexible inputs and outputs</a></li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="configyaml-fields">
  <em>config.yaml</em> fields
  <a class="anchor" href="#configyaml-fields">#</a>
</h1>
<p><span style="font-size:12pt; color:red">Note that this is a living document and the following is subject to change.</span></p>
<p>The Data Pipeline API hinges on a <em>config.yaml</em> file, which lets users specify metadata to be used during file lookup for read or write, and configure overall API behaviour. This user written <em>config.yaml</em> is translated into a working config file by <code>FAIR run</code>, which is then taken as input by the Data Pipeline API.</p>
<p>This page gives examples of the <strong>user written</strong> <em>config.yaml</em> file.</p>
<h2 id="simple-inputs-and-outputs">
  Simple inputs and outputs
  <a class="anchor" href="#simple-inputs-and-outputs">#</a>
</h2>
<p>The following example reads various pieces of data and writes an external object.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">run_metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">A simple analysis</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">local_data_registry_url</span><span class="p">:</span><span class="w"> </span><span class="l">https://localhost:8000/api/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_data_registry_url</span><span class="p">:</span><span class="w"> </span><span class="l">https://data.fairdatapipeline.org/api/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">default_input_namespace</span><span class="p">:</span><span class="w"> </span><span class="l">SCRC</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">default_output_namespace</span><span class="p">:</span><span class="w"> </span><span class="l">johnsmith</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">write_data_store</span><span class="p">:</span><span class="w"> </span><span class="l">/datastore/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">local_repo</span><span class="p">:</span><span class="w"> </span><span class="l">/Users/johnsmith/git/myproject/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># `script:` points to the submission script (relative to local_repo)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="l">python path/submission_script.py ${{CONFIG_PATH}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># `script_path:` can be used instead of `script:`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">read</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Read version 1.0 of human/commutes</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">data_product</span><span class="p">:</span><span class="w"> </span><span class="l">human/commutes</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="m">1.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Read human/health from the cache</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">data_product</span><span class="p">:</span><span class="w"> </span><span class="l">human/health</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">use</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">cache</span><span class="p">:</span><span class="w"> </span><span class="l">/local/file.h5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Read crummy_table with specific doi and title</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">external_object</span><span class="p">:</span><span class="w"> </span><span class="l">crummy_table</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">doi</span><span class="p">:</span><span class="w"> </span><span class="m">10.1111</span><span class="l">/ddi.12887</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">Supplementary Table 2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Read secret_data with specific doi and title from the cache</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">external_object</span><span class="p">:</span><span class="w"> </span><span class="l">secret_data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">doi</span><span class="p">:</span><span class="w"> </span><span class="m">10.1111</span><span class="l">/ddi.12887</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">Supplementary Table 3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">use</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">cache</span><span class="p">:</span><span class="w"> </span><span class="l">/local/secret.csv</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Read weird_lost_file (which perhaps has no metadata) with specific hash</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">object</span><span class="p">:</span><span class="w"> </span><span class="l">weird_lost_file</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">hash</span><span class="p">:</span><span class="w"> </span><span class="l">b5a514810b4cb6dc795848464572771f</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">write</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Write beautiful_figure and increment version number</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">external_object</span><span class="p">:</span><span class="w"> </span><span class="l">beautiful_figure</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">unique_name</span><span class="p">:</span><span class="w"> </span><span class="l">My amazing figure</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l">${{MINOR}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">public</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span></code></pre></div><ul>
<li>
<p><code>run_metadata:</code> provides metadata for the run:</p>
<ul>
<li><code>description:</code> is a human readable description of the purpose of the config.yaml</li>
<li><code>local_data_registry_url:</code> specifies the local data registry root, which defaults to https<!-- -->://localhost:8000/api/</li>
<li><code>remote_data_registry_url:</code> specifies the remote data registry endpoint, which defaults to https<!-- -->://data.fairdatapipeline.org/api/</li>
<li><code>default_input_namespace:</code> and <code>default_output_namespace:</code> specify the default namespace for reading and writing</li>
<li><code>write_data_store:</code> specifies the file system root used for data writes, which is set here to /datastore. Note that if a file is referenced in the local filesystem (files specified in <code>read: use: cache:</code>) but that part of the local filesystem is not within a StorageRoot that the registry knows about, then the file will be copied into the <code>write_data_store</code> so that it can be referenced correctly in the registry.</li>
<li>The submission script itself should either be written in <code>script</code> or stored in a text file in <code>script_path</code>, which can be absolute or relative to <code>local_repo:</code> (the root of the local repository)</li>
<li>Any other fields will be ignored</li>
</ul>
</li>
<li>
<p><code>read:</code> and <code>write:</code> provide references to data:</p>
<ul>
<li><code>data_product:</code> (within <code>read:</code> and <code>write:</code>), <code>external_object:</code> (<code>read:</code> and <code>write:</code>) and <code>object:</code> (<code>read:</code> only) specify metadata subsets that are matched in the read and write processes. The metadata values may use glob syntax, in which case matching is done against the glob.</li>
<li>For reads, a <code>cache:</code> may be specified directly, in which case it will be used without any further lookup.</li>
<li>If a write is carried out to a data product where no such <code>data_product:</code> entry exists, then a new data product is created with that name in the local namespace, or the patch version of an existing data product is suitably incremented. The level of incrementation or version number can be explicitly defined by <code>version:</code>.</li>
<li>If a write is carried out to an object that is not a data product and no such <code>external_object:</code> entry exists, then a new object is created with no associated external object or data product, and an issue is raised with the object to note the absence of an appropriate reference, referencing the name given in the write API call.</li>
<li><code>version:</code> can be specified explicitly (<em>e.g.</em> <code>0.1.0</code> or <code>0.20210414.0</code>), by reference (<em>e.g.</em> <code>0.${{DATE}}.0</code>, meaning <code>0.20210414.0</code>), or by increment (<em>i.e.</em> <code>${{MAJOR}}</code>, <code>${{MINOR}}</code>, or <code>${{PATCH}}</code>). If an object already exists and no version is specified, it will be incremented by patch, by default.</li>
<li><code>public:</code> can be specified for data products in <code>write:</code> and is taken to be <code>true</code> when absent</li>
</ul>
</li>
</ul>
<h2 id="extended-inputs-and-outputs">
  Extended inputs and outputs
  <a class="anchor" href="#extended-inputs-and-outputs">#</a>
</h2>
<p>The following example registers a new external object and writes a data product component.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">run_metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">Register a file in the pipeline</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">local_data_registry_url</span><span class="p">:</span><span class="w"> </span><span class="l">https://localhost:8000/api/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_data_registry_url</span><span class="p">:</span><span class="w"> </span><span class="l">https://data.fairdatapipeline.org/api/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">default_input_namespace</span><span class="p">:</span><span class="w"> </span><span class="l">SCRC</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">default_output_namespace</span><span class="p">:</span><span class="w"> </span><span class="l">johnsmith</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">write_data_store</span><span class="p">:</span><span class="w"> </span><span class="l">/datastore/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">local_repo</span><span class="p">:</span><span class="w"> </span><span class="l">/Users/johnsmith/git/myproject/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="c"># Points to the Python script, below (relative to local_repo)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="l">python path/submission_script.py {CONFIG_PATH}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># `script_path:` can be used instead of `script:`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">register</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">external_object</span><span class="p">:</span><span class="w"> </span><span class="l">records/SARS-CoV-2/scotland/human-mortality</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Who owns the data?</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">namespace_name</span><span class="p">:</span><span class="w"> </span><span class="l">Scottish Government Open Data Repository</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">namespace_full_name</span><span class="p">:</span><span class="w"> </span><span class="l">Scottish Government Open Data Repository</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">namespace_website</span><span class="p">:</span><span class="w"> </span><span class="l">https://statistics.gov.scot/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Where does the data come from?</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">root</span><span class="p">:</span><span class="w"> </span><span class="l">https://statistics.gov.scot/sparql.csv?query=</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="p">|-</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">    PREFIX qb: &lt;http://purl.org/linked-data/cube#&gt;
</span></span></span><span class="line"><span class="cl"><span class="sd">    PREFIX data: &lt;http://statistics.gov.scot/data/&gt;
</span></span></span><span class="line"><span class="cl"><span class="sd">    PREFIX rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;
</span></span></span><span class="line"><span class="cl"><span class="sd">    PREFIX dim: &lt;http://purl.org/linked-data/sdmx/2009/dimension#&gt;
</span></span></span><span class="line"><span class="cl"><span class="sd">    PREFIX sdim: &lt;http://statistics.gov.scot/def/dimension/&gt;
</span></span></span><span class="line"><span class="cl"><span class="sd">    PREFIX stat: &lt;http://statistics.data.gov.uk/def/statistical-entity#&gt;
</span></span></span><span class="line"><span class="cl"><span class="sd">    PREFIX mp: &lt;http://statistics.gov.scot/def/measure-properties/&gt;
</span></span></span><span class="line"><span class="cl"><span class="sd">    SELECT ?featurecode ?featurename ?areatypename ?date ?cause ?location ?gender ?age ?type ?count
</span></span></span><span class="line"><span class="cl"><span class="sd">    WHERE {
</span></span></span><span class="line"><span class="cl"><span class="sd">     ?indicator qb:dataSet data:deaths-involving-coronavirus-covid-19;
</span></span></span><span class="line"><span class="cl"><span class="sd">       mp:count ?count;
</span></span></span><span class="line"><span class="cl"><span class="sd">       qb:measureType ?measType;
</span></span></span><span class="line"><span class="cl"><span class="sd">       sdim:age ?value;
</span></span></span><span class="line"><span class="cl"><span class="sd">       sdim:causeOfDeath ?causeDeath;
</span></span></span><span class="line"><span class="cl"><span class="sd">       sdim:locationOfDeath ?locDeath;
</span></span></span><span class="line"><span class="cl"><span class="sd">       sdim:sex ?sex;
</span></span></span><span class="line"><span class="cl"><span class="sd">       dim:refArea ?featurecode;
</span></span></span><span class="line"><span class="cl"><span class="sd">       dim:refPeriod ?period.
</span></span></span><span class="line"><span class="cl"><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">       ?measType rdfs:label ?type.
</span></span></span><span class="line"><span class="cl"><span class="sd">       ?value rdfs:label ?age.
</span></span></span><span class="line"><span class="cl"><span class="sd">       ?causeDeath rdfs:label ?cause.
</span></span></span><span class="line"><span class="cl"><span class="sd">       ?locDeath rdfs:label ?location.
</span></span></span><span class="line"><span class="cl"><span class="sd">       ?sex rdfs:label ?gender.
</span></span></span><span class="line"><span class="cl"><span class="sd">       ?featurecode stat:code ?areatype;
</span></span></span><span class="line"><span class="cl"><span class="sd">         rdfs:label ?featurename.
</span></span></span><span class="line"><span class="cl"><span class="sd">       ?areatype rdfs:label ?areatypename.
</span></span></span><span class="line"><span class="cl"><span class="sd">       ?period rdfs:label ?date.
</span></span></span><span class="line"><span class="cl"><span class="sd">    }</span><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># Metadata</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">Deaths involving COVID19</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">Nice description of the dataset</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">unique_name</span><span class="p">:</span><span class="w"> </span><span class="l">Scottish deaths involving COVID19  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">alternate_identifier_type</span><span class="p">:</span><span class="w"> </span><span class="l">ods_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">file_type</span><span class="p">:</span><span class="w"> </span><span class="l">csv</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">release_date</span><span class="p">:</span><span class="w"> </span><span class="l">${{DATETIME}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="l">.${{DATE}}.0       </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">primary</span><span class="p">:</span><span class="w"> </span><span class="kc">True</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">write</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">data_product</span><span class="p">:</span><span class="w"> </span><span class="l">records/SARS-CoV-2/scotland/human-mortality/results</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">human mortality data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="l">.${{DATE}}.0</span><span class="w">
</span></span></span></code></pre></div><ul>
<li><code>register:</code> will take exactly one of <code>unique_name:</code> and <code>alternate_identifier_type</code>, or <code>identifier:</code>.</li>
</ul>
<h2 id="flexible-inputs-and-outputs">
  Flexible inputs and outputs
  <a class="anchor" href="#flexible-inputs-and-outputs">#</a>
</h2>
<p>The following example describes an analysis which typically reads <em>human/population</em> and writes <em>human/outbreak-timeseries</em>. Instead, a test model is run using Scottish data, whereby <em>scotland/human/population</em> is read from the <em>eera</em> namespace, rather than <em>human/population</em>. Likewise, the output is written as <em>scotland/human/outbreak-timeseries</em> rather than <em>human/outbreak-timeseries</em>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">run_metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">A test model</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">local_data_registry_url</span><span class="p">:</span><span class="w"> </span><span class="l">https://localhost:8000/api/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_data_registry_url</span><span class="p">:</span><span class="w"> </span><span class="l">https://data.fairdatapipeline.org/api/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">default_input_namespace</span><span class="p">:</span><span class="w"> </span><span class="l">SCRC</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">default_output_namespace</span><span class="p">:</span><span class="w"> </span><span class="l">johnsmith</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">write_data_store</span><span class="p">:</span><span class="w"> </span><span class="l">/datastore/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">local_repo</span><span class="p">:</span><span class="w"> </span><span class="l">/Users/johnsmith/git/myproject/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="c"># Points to the Python script, below (relative to local_repo)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="l">python path/submission_script.py {CONFIG_PATH}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">read</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">data_product</span><span class="p">:</span><span class="w"> </span><span class="l">human/population</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">use</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l">eera</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">data_product</span><span class="p">:</span><span class="w"> </span><span class="l">scotland/human/population</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">write</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">data_product</span><span class="p">:</span><span class="w"> </span><span class="l">human/outbreak-timeseries</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">use</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">data_product</span><span class="p">:</span><span class="w"> </span><span class="l">scotland/human/outbreak-timeseries</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">data_product</span><span class="p">:</span><span class="w"> </span><span class="l">human/outbreak/simulation_run</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">use</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">data_product</span><span class="p">:</span><span class="w"> </span><span class="l">human/outbreak/simulation_run-${{RUN_ID}}</span><span class="w">
</span></span></span></code></pre></div><ul>
<li><code>read:</code> and <code>write:</code> provide references to data:
<ul>
<li>The corresponding <code>use:</code> sections contain metadata that is used to update the call metadata before the file access is attempted</li>
<li>Any part of a <code>use:</code> statement may contain the string <code>${{RUN_ID}}</code>, which will be replaced with the run id, otherwise a hash of the config contents and the date will be used</li>
</ul>
</li>
</ul>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





  <div>
    <a class="flex align-center" href="https://github.com/FAIRDataPipeline/FDP_hugo/tree/master/content//docs/cli/config/_index.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#configyaml-fields"><em>config.yaml</em> fields</a>
      <ul>
        <li><a href="#simple-inputs-and-outputs">Simple inputs and outputs</a></li>
        <li><a href="#extended-inputs-and-outputs">Extended inputs and outputs</a></li>
        <li><a href="#flexible-inputs-and-outputs">Flexible inputs and outputs</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>











